{% extends 'layout/base.html' %}

{% block header %}
	<div class="masthead text-center mb-0 pb-0 d-flex justify-content-center">	
		<div class="col-md-8 col-sm-10 jumbotron">
			<h1 class="fs-3"><i class="fas fa-equals mr-4"></i>Comparar Resultados</h1>
		</div>
	</div>
{% endblock header %}

{% block content %}
	<div class="text-center mb-0 pb-0 d-flex justify-content-center">
		<div class="col-md-9 col-sm-10 d-flex flex-wrap justify-content-center">
			<canvas id="chart" width="550" height="550" class="jumbotron col-md-8 col-sm-12 p-0 mx-0"></canvas>
			<div class="col-md-3 col-sm-12 ml-2">
				<div class="jumbotron py-2">
					<a class="nounderline text-secondary" data-toggle="collapse" href="#collapseMenu" role="button" aria-expanded="false" aria-controls="collapseMenu">
						<h3 class="text-left"><i class="fas fa-bars mr-2"></i>Menu</h3>
					</a>
					<div class="collapse" id="collapseMenu">
						<ul class="list-group text-left">
							<li class="list-group-item list-group-item bg-secondary rounded my-2"><a class="nav-link text-white" target="_blank" href="{% url 'layout-hexaco-test' %}"><i class="fas fa-plus mr-2"></i>Volver a realizar</a></li>
							<li class="list-group-item list-group-item bg-secondary rounded my-2"><a class="nav-link text-white" href="{% url 'layout-hexaco-results' %}?type=polarArea"><i class="fas fa-chart-pie mr-2"></i>Gráfico Radar</a></li>
							<li class="list-group-item list-group-item bg-secondary rounded my-2"><a class="nav-link text-white" href="{% url 'layout-hexaco-results' %}?type=bar"><i class="fas fa-chart-bar mr-2"></i>Gráfico Barras</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock content %}

{% block script %}
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script>
		$(document).ready(function(){
			let ctx = document.getElementById("chart").getContext("2d");
			let chart = new Chart(ctx, {
			type: 'radar',
			data: {
				labels: [{% for l in labels %}'{{ l }}', {% endfor %}],
				datasets: [
					{
						label: '{{ user.first_name }}',
						backgroundColor: [
							'rgba(255, 99, 132, 0.2)',
							'rgba(54, 162, 235, 0.2)',
							'rgba(255, 206, 86, 0.2)',
							'rgba(75, 192, 192, 0.2)',
							'rgba(153, 102, 255, 0.2)',
							'rgba(255, 159, 64, 0.2)'
						],
						borderColor: [
							'rgba(255, 99, 132, 1)',
							'rgba(54, 162, 235, 1)',
							'rgba(255, 206, 86, 1)',
							'rgba(75, 192, 192, 1)',
							'rgba(153, 102, 255, 1)',
							'rgba(255, 159, 64, 1)'
						],
						data: [{% for v in values_m %}'{{ v }}', {% endfor %}]
					},
                    {
						label: '{{ compare_user }}',
						backgroundColor: [
							'rgba(255, 99, 132, 0.2)',
							'rgba(54, 162, 235, 0.2)',
							'rgba(255, 206, 86, 0.2)',
							'rgba(75, 192, 192, 0.2)',
							'rgba(153, 102, 255, 0.2)',
							'rgba(255, 159, 64, 0.2)'
						],
						borderColor: [
							'rgba(255, 99, 132, 1)',
							'rgba(54, 162, 235, 1)',
							'rgba(255, 206, 86, 1)',
							'rgba(75, 192, 192, 1)',
							'rgba(153, 102, 255, 1)',
							'rgba(255, 159, 64, 1)'
						],
						data: [{% for v in values_c %}'{{ v }}', {% endfor %}]
					}
				]
			},
			options: {
				indexAxis: 'y',
				responsive: false,
				layout: {
					padding: 20
					},
				plugins: {
					title: {
						display: true,
						color: '#2c3e50',
						padding: 20,
						font: {
							size: 25,
						},
						text: 'Rasgos de Personalidad',
					},
					legend: {
						display: true,
						position: 'left',
						labels: {
							boxWidth: 25,
							boxHeight: 25,
							padding: 20,
							color: '#2c3e50',
						}
					}
				},
				maintainAspectRatio: true,
				scale: {
					beginAtZero: false,
					min: 1,
					r: {

						min: 1,
						ticks: {
							stepSize: 0.5,
						}
					}
					},
			}
			});
		});
	</script>
{% endblock script %}